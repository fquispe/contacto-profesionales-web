<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RF-005: Gesti√≥n de Perfil de Cliente - ServiciosPro</title>
    <link rel="stylesheet" href="assets/css/Perfil-cliente.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìã Gesti√≥n de Perfil de Cliente</h1>
            <p>RF-005: Configure su informaci√≥n personal, direcciones y preferencias</p>
        </div>

        <div class="form-content">
            <!-- Bot√≥n de retorno -->
            <div style="margin-bottom: 20px;">
                <a href="dashboard.html" class="btn-secondary" style="text-decoration: none; display: inline-block;">
                    ‚Üê Volver al Dashboard
                </a>
            </div>

            <div id="alertContainer"></div>

            <div class="form-tabs">
                <button class="tab-button active" onclick="switchTab('personal')">üìù Informaci√≥n Personal</button>
                <button class="tab-button" onclick="switchTab('direcciones')">üìç Direcciones</button>
                <button class="tab-button" onclick="switchTab('preferencias')">‚öôÔ∏è Preferencias</button>
                <button class="tab-button" onclick="switchTab('notificaciones')">üîî Notificaciones</button>
                <button class="tab-button" onclick="switchTab('privacidad')">üîí Privacidad</button>
            </div>

            <form id="clientProfileForm">
                <input type="hidden" id="clienteId" name="clienteId">

                <!-- TAB 1: Informaci√≥n Personal -->
                <div class="tab-content active" id="tab-personal">
                    <div class="form-section">
                        <h3 class="section-title">üë§ Datos Personales</h3>
                        
                        <div class="form-group">
                            <label class="form-label">Foto de Perfil (Opcional)</label>
                            <div class="photo-upload">
                                <div class="photo-preview" id="photoPreview">
                                    <span style="font-size: 32px;">üì∑</span>
                                </div>
                                <div>
                                    <button type="button" class="photo-upload-btn" onclick="document.getElementById('photoInput').click()">
                                        Seleccionar Foto
                                    </button>
                                    <input type="file" id="photoInput" style="display: none;" accept="image/*" />
                                    <div style="font-size: 12px; color: var(--medium-gray); margin-top: 5px;">
                                        JPG, PNG ‚Ä¢ M√°ximo 5MB
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Nombre Completo *</label>
                            <input type="text" class="form-input" id="fullName" name="fullName" required maxlength="100">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Correo Electr√≥nico *</label>
                            <input type="email" class="form-input" id="email" name="email" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Tel√©fono *</label>
                            <input type="tel" class="form-input" id="phone" name="phone" placeholder="987654321" required pattern="[0-9]{9}">
                        </div>
                    </div>
                </div>

                <!-- TAB 2: Direcciones -->
                <div class="tab-content" id="tab-direcciones">
                    <div class="form-section">
                        <h3 class="section-title">üè† Direcciones</h3>
                        <p style="color: var(--medium-gray); margin-bottom: 20px;">
                            Puede registrar hasta 3 direcciones diferentes
                        </p>
                        
                        <div id="addressesContainer">
                            <!-- Direcciones se cargar√°n aqu√≠ -->
                        </div>
                        
                        <button type="button" class="btn-add" onclick="addAddress()" id="addAddressBtn">+ Agregar Direcci√≥n</button>
                    </div>
                </div>

                <!-- TAB 3: Preferencias -->
                <div class="tab-content" id="tab-preferencias">
                    <div class="form-section">
                        <h3 class="section-title">üîç Preferencias de B√∫squeda</h3>
                        
                        <div class="form-group">
                            <label class="form-label">Categor√≠as Favoritas</label>
                            <div class="category-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px;">
                                <label style="display: flex; align-items: center; gap: 8px; padding: 10px; background: white; border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">
                                    <input type="checkbox" name="categoria" value="plomeria">
                                    <span>üîß Plomer√≠a</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; padding: 10px; background: white; border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">
                                    <input type="checkbox" name="categoria" value="electricidad">
                                    <span>‚ö° Electricidad</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; padding: 10px; background: white; border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">
                                    <input type="checkbox" name="categoria" value="limpieza">
                                    <span>üßπ Limpieza</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; padding: 10px; background: white; border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">
                                    <input type="checkbox" name="categoria" value="jardineria">
                                    <span>üåø Jardiner√≠a</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; padding: 10px; background: white; border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">
                                    <input type="checkbox" name="categoria" value="pintura">
                                    <span>üé® Pintura</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; padding: 10px; background: white; border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">
                                    <input type="checkbox" name="categoria" value="carpinteria">
                                    <span>ü™ö Carpinter√≠a</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Radio de B√∫squeda: <span id="rangeValue">10 km</span>
                            </label>
                            <input type="range" class="range-slider" id="searchRadius" name="searchRadius"
                                   min="1" max="50" value="10" oninput="updateRangeValue(this)"
                                   style="width: 100%; height: 6px; border-radius: 5px; background: var(--border-color); outline: none; -webkit-appearance: none;">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Presupuesto Promedio (S/.)</label>
                            <input type="number" class="form-input" id="averageBudget" name="averageBudget" placeholder="150.00" min="0" step="0.01">
                        </div>
                    </div>
                </div>

                <!-- TAB 4: Notificaciones -->
                <div class="tab-content" id="tab-notificaciones">
                    <div class="form-section">
                        <h3 class="section-title">üîî Notificaciones</h3>
                        
                        <div class="notification-item">
                            <div class="notification-label">
                                <span>üìß</span>
                                <div>
                                    <div style="font-weight: 600;">Notificaciones por Email</div>
                                    <div style="font-size: 12px; color: var(--medium-gray);">Recibir actualizaciones</div>
                                </div>
                            </div>
                            <div class="toggle-switch" id="emailNotifications" onclick="toggleSwitch(this)"></div>
                        </div>

                        <div class="notification-item">
                            <div class="notification-label">
                                <span>üì±</span>
                                <div>
                                    <div style="font-weight: 600;">Notificaciones Push</div>
                                    <div style="font-size: 12px; color: var(--medium-gray);">Alertas instant√°neas</div>
                                </div>
                            </div>
                            <div class="toggle-switch" id="pushNotifications" onclick="toggleSwitch(this)"></div>
                        </div>

                        <div class="notification-item">
                            <div class="notification-label">
                                <span>üí∞</span>
                                <div>
                                    <div style="font-weight: 600;">Promociones</div>
                                    <div style="font-size: 12px; color: var(--medium-gray);">Ofertas especiales</div>
                                </div>
                            </div>
                            <div class="toggle-switch" id="promotionNotifications" onclick="toggleSwitch(this)"></div>
                        </div>

                        <div class="notification-item">
                            <div class="notification-label">
                                <span>‚≠ê</span>
                                <div>
                                    <div style="font-weight: 600;">Rese√±as</div>
                                    <div style="font-size: 12px; color: var(--medium-gray);">Recordatorios de evaluaci√≥n</div>
                                </div>
                            </div>
                            <div class="toggle-switch active" id="reviewNotifications" onclick="toggleSwitch(this)"></div>
                        </div>
                    </div>
                </div>

                <!-- TAB 5: Privacidad -->
                <div class="tab-content" id="tab-privacidad">
                    <div class="form-section">
                        <h3 class="section-title">üîí Privacidad</h3>
                        
                        <div class="notification-item">
                            <div class="notification-label">
                                <span>üëÅÔ∏è</span>
                                <div>
                                    <div style="font-weight: 600;">Perfil Visible</div>
                                    <div style="font-size: 12px; color: var(--medium-gray);">Permitir que vean tu perfil</div>
                                </div>
                            </div>
                            <div class="toggle-switch active" id="profileVisible" onclick="toggleSwitch(this)"></div>
                        </div>

                        <div class="notification-item">
                            <div class="notification-label">
                                <span>üìç</span>
                                <div>
                                    <div style="font-weight: 600;">Compartir Ubicaci√≥n</div>
                                    <div style="font-size: 12px; color: var(--medium-gray);">Mostrar ubicaci√≥n aproximada</div>
                                </div>
                            </div>
                            <div class="toggle-switch" id="shareLocation" onclick="toggleSwitch(this)"></div>
                        </div>

                        <div class="notification-item">
                            <div class="notification-label">
                                <span>üìä</span>
                                <div>
                                    <div style="font-weight: 600;">Historial P√∫blico</div>
                                    <div style="font-size: 12px; color: var(--medium-gray);">Mostrar rese√±as y calificaciones</div>
                                </div>
                            </div>
                            <div class="toggle-switch" id="publicHistory" onclick="toggleSwitch(this)"></div>
                        </div>
                    </div>
                </div>

                <!-- Botones de Acci√≥n -->
                <div class="form-actions" style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 30px;">
                    <button type="button" class="btn-secondary" onclick="cancelForm()">‚úï Cancelar</button>
                    <button type="button" class="btn-secondary" onclick="exportData()">üì• Exportar</button>
                    <button type="submit" class="btn-primary">üíæ Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="assets/js/Perfil-cliente.js"></script>
</body>
</html>